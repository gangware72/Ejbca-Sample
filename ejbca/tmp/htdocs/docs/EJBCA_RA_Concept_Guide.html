<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>EJBCA RA Concept Guide - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=85924110"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                     <li><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                            </ul>
</div>            <h1 id="src-85924110"> <span>EJBCA RA Concept Guide</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>This RA Concept guide describes the basic concepts of the EJBCA Registration Authority (RA).</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For information on how to manage the RA, see <a   href="#">RA Operations Guide</a>.</p>
        </div>
    </div>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85924110_safe-id-aWQtLkVKQkNBUkFDb25jZXB0R3VpZGV2Ny40LjAtV2hhdGlzdGhlRUpCQ0FSQT8">What is the EJBCA RA?</a></p>
</li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-GeneralConcepts">General Concepts</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-Enrollment">Enrollment</a></p>
</li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-CertificateandEndEntityLifeCycleManagement">Certificate and End Entity Life Cycle Management</a></p>
</li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-ApprovalsManagement">Approvals Management</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-RolesManagement">Roles Management</a></p>
</li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-SystemArchitecturalConcepts">System Architectural Concepts</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-TransferSecurity">Transfer Security</a></p>
</li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-DomainSecurity">Domain Security</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-Customizability">Customizability</a></p>
</li><li class=" "><p   
><a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-Clustering">Clustering</a></p>
</li></ul>    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For information on the legacy asynchronous External RA implementation, see <a   href="External_RA_using_Database_Polling.html">External RA using Database Polling</a>.</p>
        </div>
    </div>
    <div class="section section-1" id="src-85924110_safe-id-aWQtLkVKQkNBUkFDb25jZXB0R3VpZGV2Ny40LjAtV2hhdGlzdGhlRUpCQ0FSQT8">
        <h1 class="heading "><span>What is the EJBCA RA?</span></h1>
<p   
>What is there in a name, and what does it mean to have an RA installed? A Registration Authority (RA) handles enrollment operations, which can either be directly through EJBCA's RA interface as described in these sections, but can also be through other enrollment means such as ACME, EST, REST, etc.</p>
<p   
>How this is designed and handled is discussed in the section <a   href="#src-85924110_id-.EJBCARAConceptGuidev7.4.0-SystemArchitecturalConcepts">System Architectural Concepts</a>.</p>
<p   
>The RA can either reside on the same EJBCA instance as the CA, but is more commonly proxied out to its own EJBCA instance and connected to EJBCA through the <a   href="Peer_Systems.html">peers protocol</a>. The purpose of doing so is to not expose the CA to the general domain, but instead keep it in an high-security zone behind a firewall allowing only outgoing connections over TLS, while the RA sits in a low-security zone (i.e a DMZ) which allows incoming connections from either within the network or even wider, depending on use case. Doing so also allows for multiple RAs to be connected to the CA behind a load balancer.</p>
    </div>
    <div class="section section-1" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-GeneralConcepts">
        <h1 class="heading "><span>General Concepts</span></h1>
    <div class="section section-2" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-Enrollment">
        <h2 class="heading "><span>Enrollment</span></h2>
<p   
>A basic facet of any RA is for users to be able to directly interface against it to enroll for certificates or key stores. The EJBCA provides for two basic workflows, which is either for users to enroll while providing their own identifying information (in the form of username/password) or to enroll for a pre-created end entity and simply submit the username/password which they have been provided. Certificates are made in a two-step process:</p>
<ol class=" "><li class=" "><p   
>First, an end entity is created, defining all values inherent to that end entity such as certificate type (i.e. <a   href="End_Entity_Profiles_Overview.html">E</a><a   href="End_Entity_Profiles_Overview.html">nd</a><a   href="End_Entity_Profiles_Overview.html"> Entity Profiles Overview</a>), certificate sub-type (i.e. <a   href="Certificate_Profiles_Overview.html">certifi</a><a   href="Certificate_Profiles_Overview.html">cate</a><a   href="Certificate_Profiles_Overview.html"> profile</a>), subject DN values, subject alternative names, etc.</p>
</li><li class=" "><p   
>In the second step the actual enrollment occurs, and the certificate/key store is generated. In between these two, there may a series of <a   href="Approval_Profiles.html">approvals</a> and <a   href="Validators_Overview.html">validations</a> occurring if the CA is configured for it.</p>
</li></ol><p   
>If the RA user is enrolling their own end entity, they'll be given the choice of either entering the complete information (signing algorithm, key size, etc) of the key store they're requesting, or be directed to a field where they can paste/upload a CSR. If the CA is set to allow all enrollment they'll then be allowed to download the key store/certificate in any of the approved formats, otherwise they'll be given an enrollment code which they can use to retrieve the certificate/key store when they have been notified that it's been issued. In the case of a key store, the key store file itself will be locked with the password supplied. EJBCA does not save generated key stores by default, unless the CA has been configured to allow for <a   href="Key_Recovery.html">later retrieval</a>, which will have the CA save the keystore in the database, encrypted by the CA's encryption key. (This only works for RSA encryption keys, as EC does not allow for encryption).</p>
<p   
>The RA can also be configured to allow for unauthenticated connections (either over plain http, or over https, or both).</p>
    </div>
    <div class="section section-2" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-CertificateandEndEntityLifeCycleManagement">
        <h2 class="heading "><span>Certificate and End Entity Life Cycle Management</span></h2>
<p   
>The second basic aspect of the RA that most users will interface with is the search screens, which allow for searching for end entities and certificates using partial search data, restricted to whatever the user is allowed to view (see more on that below). Through this view users and admins can request revocations of their certificates.</p>
    </div>
    <div class="section section-2" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-ApprovalsManagement">
        <h2 class="heading "><span>Approvals Management</span></h2>
<p   
>An essential part of the workflow for an RA administrator is handling enrollment requests on CAs which have been configured to use <a   href="Approval_Profiles.html">approvals</a>. In the EJBCA RA authorized users can log in and handle enrollment requests which require their attention. On an EJBCA instance set up to proxy a CA requests will be seamlessly fed from the CA to the RA, and can be managed from there.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-RolesManagement">
        <h1 class="heading "><span>Roles Management</span></h1>
<p   
>While most role and access rules assignments are handled from the CA UI, the RA provides some limited role administration functionality for authorized users to be able to create additional RA administrators. The purpose of this is to allow <strong class=" ">Managed PKI</strong> configurations (where the RA is fully owned and administrated by a party other than the CA) to manage and administrate their own users. RA administrators created through this interface will be strictly limited to only being able to manage end entities and approving requests - they can get neither administration privileges to the CA nor any management access to the RA itself.</p>
    </div>
    <div class="section section-1" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-SystemArchitecturalConcepts">
        <h1 class="heading "><span>System Architectural Concepts</span></h1>
    <div class="section section-2" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-TransferSecurity">
        <h2 class="heading "><span>Transfer Security</span></h2>
<p   
>When using the EJBCA RA interface connected to another instance configured as CA, the two are connected using the <a   href="Peer_Systems.html">EJBCA Peers Protocol.</a> The basis of Peers is on peer-to-peer communication between to instances of EJBCA over TLS, where the initiating (i.e. <i class=" ">outgoing</i>) side identifies itself using a certificate issued by a commonly trusted CA to the receiving (i.e <i class=" ">incoming</i>) side, which on the outgoing end will be defined by an <a   href="AuthenticationKeyBinding.html">Authentication Key Binding</a>. The assumed security level is that the firewall between the two zones will only allow secure outgoing communication from the CA to RA, so thus the CA will initiate communications by leaving a number of long-hanging communication threads to the RA, which it can use to forward requests from the end user. The thread pool is limited, mitigating the risk of a compromised RA being able to perform DOS attacks against the CA.</p>
    </div>
    <div class="section section-2" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-DomainSecurity">
        <h2 class="heading "><span>Domain Security</span></h2>
<p   
>As mentioned above, complete compromise of the RA (including administrator key pairs) can only lead to limited effects on the CA. While they could at worst enroll certificates and approve requests, the RA communicates to the CA layer (even when the two are on the same instance) through a proxied interface that limits the available operations. If the RA is on a proxied instance (which has a far higher risk of getting compromised being in a lower security zone than the CA), damage is further mitigated through the fact that the peer connection itself is given its own <a   href="Roles_and_Access_Rules.html">role</a> and associate access rules, meaning that even if an attacker gets ahold of a super admin key pair and uses it on the RA, the scope of the attack is limited to the above; they can still perform no CA management operations nor get access to other CA's hosted on the CA instance that the peer connection isn't authorized to. Further, error messages are filtered when outgoing to the RA, giving a potential attacker little access to unauthorized information. For more information, see <a   href="RA_Administrator_Access_Rules.html">RA Administration</a>.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-Customizability">
        <h1 class="heading "><span>Customizability</span></h1>
<p   
>The EJBCA RA can be widely customized to fit individual needs, even allowing for various stylesheets to be administrated from the CA, and set differently depending on the role of the user.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For more information, see <a   href="Customizing_the_RA_Appearance.html">Customizing the RA Appearance</a>.</p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-85924110_id-.EJBCARAConceptGuidev7.4.0-Clustering">
        <h1 class="heading "><span>Clustering</span></h1>
<p   
>You can use multiple RA servers to provide higher availability or increase performance. The RA itself is stateless and therefore any user can access any RA server to perform their tasks, as long as it is an RA with the same privileges.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For more information, see <a   href="High_Availability_and_Clustering.html">High Availability and Clustering</a>.</p>
        </div>
    </div>
<p   
>A user session against the RA UI uses HTTPS sessions, and are typically pinned to a certain node by a load balancer. An RA node must always service one CA cluster, but it does not matter which particular node in the CA cluster that serves a request as long as they all have a common view of the CA database.</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="User_Data_Sources.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>User Data Sources</span>
        </a>
                <a href="External_RA_using_Database_Polling.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>External RA using Database Polling</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

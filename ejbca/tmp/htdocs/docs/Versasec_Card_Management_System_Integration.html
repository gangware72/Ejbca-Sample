<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Versasec Card Management System Integration - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=57311311"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Integration.html">EJBCA Integration</a></li>
                                                                                     <li><a href="Integrating_with_Third-Party_Applications.html">Integrating with Third-Party Applications</a></li>
                                                            </ul>
</div>            <h1 id="src-57311311"> <span>Versasec Card Management System Integration</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <div class="section section-1" id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Introduction">
        <h1 class="heading "><span>Introduction</span></h1>
<p   
>To illustrate an example integration between the Certificate Authority EJBCA and a Card Management System (CMS), the Versasec vSEC:CMS has been deployed in combination with EJBCA. Versasec has native integration with EJBCA, enabling a straightforward and robust integration.</p>
<p   
>This guide describes how to integrate EJBCA with the Versasec vSEC:CMS Card Management System.</p>
    <div class="section section-2" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1WZXJzYXNlY3ZTRUM6Q01T">
        <h2 class="heading "><span>Versasec vSEC:CMS</span></h2>
<p   
>Versasec vSEC:CMS S-Series is a card management system that runs on a Windows Server. The vSEC:CMS software uses the Web Service API in EJBCA to integrate the PKI seamlessly with the CMS. During the card issuance and revocation, the vSEC:CMS makes web service calls to EJBCA to issue and revoke certificates.</p>
    </div>
    <div class="section section-2" id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Prerequisites">
        <h2 class="heading "><span>Prerequisites</span></h2>
<p   
>The following are required for the integration:</p>
<ul class=" "><li class=" "><p   
>EJBCA version 6.15.0 or later</p>
</li><li class=" "><p   
>Versasec vSEC:CMS S-Series version: 5.3</p>
</li></ul>    </div>
    </div>
    <div class="section section-1" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1JbnRlZ3JhdGluZ3ZTRUM6Q01Td2l0aEVKQkNB">
        <h1 class="heading "><span>Integrating vSEC:CMS with EJBCA</span></h1>
<p   
>The EJBCA Web Service API is available over TLS with mutual certificate authentication. This means that an administrator certificate has to be issued for vSEC:CMS in order for the CMS to access EJBCA. The issued certificate also needs to be linked to a role with privileges to issue and revoke the desired certificates in EJBCA. Role-based access provides detailed control of what CAs and profiles are available for the vSEC:CMS to issue certificates from. Thus, different CMSs can have access to different CAs if needed, for different departments or customers to issue their card using their own CMS.</p>
<p   
>Integrating vSEC:CMS with EJBCA includes the following steps:</p>
<ul class=" "><li class=" "><p   
><a   href="#src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step1">Step 1: Create Certificate for vSEC:CMS</a></p>
</li><li class=" "><p   
><a   href="#src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step2">Step 2: Create a Role for vSEC:CMS</a></p>
</li><li class=" "><p   
><a   href="#src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step3">Step 3: Add Certificate to Role</a></p>
</li><li class=" "><p   
><a   href="#src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step4">Step 4: Install vSEC:CMS</a></p>
</li><li class=" "><p   
><a   href="#src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step5">Step 5: Add connection to EJBCA in vSEC:CMS</a></p>
</li></ul>    <div class="section section-2" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1TdGVwMTpDcmVhdGVDZXJ0aWZpY2F0ZWZvcnZTRUM6Q01TU3RlcDE">
        <h2 class="heading "><span id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step1" class="confluence-anchor-link"></span><span>Step 1: Create Certificate for vSEC:CMS </span></h2>
<p   
>Issuing a certificate for vSEC:CMS is done using the EJBCA RA Web. Note that profiles are required to exist and be properly configured in EJBCA. For more information, see <a   href="Certificate_Profiles_Overview.html">Certificate Profiles Overview</a>.</p>
<p   
>To issue a certificate for vSEC:CMS, log in as a suitable Administrator with permission to issue other RA Admin certificates, and do the following:</p>
<ol class=" "><li class=" "><p   
>Go to the RA Web and select <strong class=" ">Make New Request.</strong></p>
</li><li class=" "><p   
>Specify the fields to issue a PKCS#12 keystore.<br/><br/>The following example uses server-side generated keys, but client generated keys work just as well.</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/57311311/Make_request.png" alt="images/download/attachments/57311311/Make_request.png" width="498" height="560" />
    <p   
></p>
<img  class="confluence-embedded-image"  src="images/download/attachments/57311311/Confirm_requewt.png" alt="images/download/attachments/57311311/Confirm_requewt.png" width="499" height="227" />
    <p   
></p>
</li></ol>    </div>
    <div class="section section-2" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1TdGVwMjpDcmVhdGVhUm9sZWZvcnZTRUM6Q01TU3RlcDI">
        <h2 class="heading "><span id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step2" class="confluence-anchor-link"></span><span>Step 2: Create a Role for vSEC:CMS </span></h2>
<p   
>In order for the vSEC:CMS to be able to issue and revoke certificates, it must be added to a role to provide necessary privileges.</p>
<p   
>To create an RA Administrator role with privileges to issue and revoke the desired certificates, do the following:</p>
<ol class=" "><li class=" "><p   
>In EJBCA Admin Web, select <strong class=" ">System Functions</strong> <strong class=" ">&gt; Administrator Roles</strong>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Add</strong>, specify a Role name, in this example <strong class=" ">Versasec</strong> <strong class=" ">CMS</strong>, and click <strong class=" ">Save</strong>.</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/57311311/Add_role.png" alt="images/download/attachments/57311311/Add_role.png" width="505" height="182" />
    </li><li class=" "><p   
>When the <strong class=" ">Versasec</strong> <strong class=" ">CM</strong> group is created, click <strong class=" ">Access</strong> <strong class=" ">Rules</strong>.</p>
</li><li class=" "><p   
>Select the <strong class=" ">RA</strong> <strong class=" ">Administrator</strong> role template, specify the settings according to the following example, and click <strong class=" ">Save</strong>.</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/57311311/Edit_access_rules.png" alt="images/download/attachments/57311311/Edit_access_rules.png" width="505" height="418" />
    </li></ol>    </div>
    <div class="section section-2" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1TdGVwMzpBZGRDZXJ0aWZpY2F0ZXRvUm9sZVN0ZXAz">
        <h2 class="heading "><span id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step3" class="confluence-anchor-link"></span><span>Step 3: Add Certificate to Role </span></h2>
<p   
>With the role created, add the certificate created for the vSEC:CMS to the newly created role by editing the members of the role and clicking <strong class=" ">Add</strong>.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/57311311/Members.png" alt="images/download/attachments/57311311/Members.png" width="544" height="90" />
    </p>
    </div>
    <div class="section section-2" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1TdGVwNDpJbnN0YWxsdlNFQzpDTVNTdGVwNA">
        <h2 class="heading "><span id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step4" class="confluence-anchor-link"></span><span>Step 4: Install vSEC:CMS </span></h2>
<p   
>Install Versasec vSEC:CMS according to the installation instructions in the Administration Guide provided with the S-Series installation installer.</p>
<p   
>Note that an Active Directory must be available in order for vSEC:CMS to manage users which should get cards issued.</p>
    </div>
    <div class="section section-2" id="src-57311311_safe-id-aWQtLlZlcnNhc2VjQ2FyZE1hbmFnZW1lbnRTeXN0ZW1JbnRlZ3JhdGlvbnY3LjEuMC1TdGVwNTpBZGRjb25uZWN0aW9udG9FSkJDQWludlNFQzpDTVNTdGVwNQ">
        <h2 class="heading "><span id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-Step5" class="confluence-anchor-link"></span><span>Step 5: Add connection to EJBCA in vSEC:CMS </span></h2>
<p   
>Finally, create a connection to EJBCA in vSEC:CMS:</p>
<ol class=" "><li class=" "><p   
>Install the issued certificate in the Windows server where vSEC:CMS is running.</p>
</li><li class=" "><p   
>Create a new connection to a CA, entering the web service URL of the EJBCA instance to connect to EJBCA and list the available profiles</p>
</li></ol><p   
>Note that vSEC:CMS has native support for EJBCA and allows you to select <strong class=" ">EJBCA</strong> from the CA types list.</p>
<p   
>For more information on adding connections, refer to the Versasec documentation on <a  class="external-link" href="https://versasec.zendesk.com/hc/en-us/articles/115000786834-Connections">vSEC:CMS S-Series Documentation - Connections.</a></p>
<p   
>The URL for the EJBCA Web Service API is: https://&lt;ejbca-server-hostname&gt;/ejbca/ejbcaws/ejbcaws?wsdl.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/57311311/Add_connection_to_EJBCA.png" alt="images/download/attachments/57311311/Add_connection_to_EJBCA.png" width="567" height="402" />
    </p>
<p   
></p>
<p   
>The integration is now completed, and you can start using Versasec vSEC:CMS to issue cards with certificates from your EJBCA Certificate Authority.</p>
<p   
>Multiple CA connections can be added to issue different cards and certificates from different CAs.</p>
    </div>
    </div>
    <div class="section section-1" id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-CMSDemoWorkflow">
        <h1 class="heading "><span>CMS Demo Workflow</span></h1>
<p   
>A basic CMS workflow consists of:</p>
<ol class=" "><li class=" "><p   
>Issue a card</p>
</li><li class=" "><p   
>Revoke the card</p>
</li><li class=" "><p   
>Unregister the card, making it available to be issued again</p>
</li></ol><p   
>A brief process with two card readers includes:</p>
<ul class=" "><li class=" "><p   
>Start vSEC:CMS using an operator card.</p>
</li><li class=" "><p   
>Put a blank smart card in the card reader.</p>
</li><li class=" "><p   
>In the Life Cycle view, click the <strong class=" ">Issue</strong> bubble.</p>
</li><li class=" "><p   
>A workflow is started with a choice of Card Template to use and which user in AD the card is issued for.</p>
</li><li class=" "><p   
>Once the workflow is completed, the card is issued.</p>
</li></ul>    </div>
    <div class="section section-1" id="src-57311311_id-.VersasecCardManagementSystemIntegrationv7.1.0-RelatedInformation">
        <h1 class="heading "><span>Related Information</span></h1>
<p   
>For a video tutorial showing the complete workflow, refer to <a  class="external-link" href="https://youtu.be/el5_o-HhvOc">https://youtu.be/el5_o-HhvOc.</a></p>
<p   
>Documentation on the life cycle process is available at <a  class="external-link" href="https://versasec.zendesk.com/hc/en-us/articles/115000843873-Lifecycle-Processes">vSEC:CMS S-Series Documentation - Lifecycle Processes.</a></p>
<p   
></p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Issuing_Certificates_to_Kubernetes_Services_using_cert-manager.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Issuing Certificates to Kubernetes Services using cert-manager</span>
        </a>
                <a href="Ciphermail_Email_Gateway_and_EJBCA_Integration.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Ciphermail Email Gateway and EJBCA Integration</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

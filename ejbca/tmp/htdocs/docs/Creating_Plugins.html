<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Creating Plugins - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=85928947"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="Tutorials_and_Guides.html">Tutorials and Guides</a></li>
                                                                                     <li><a href="Modifying_EJBCA.html">Modifying EJBCA</a></li>
                                                            </ul>
</div>            <h1 id="src-85928947"> <span>Creating Plugins</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>To, for example, extend the RA functionality considerably, possibly including additional database tables as well, you may consider using the EJBCA plugin scheme which provides custom applications with the core EJBCA environment data. In the directory <tt class=" ">src/samples/plug-ins</tt> you will find a couple of complete demo plugins that can be added to an existing EJBCA installation without any configuration.</p>
    <div class="section section-1" id="src-85928947_id-.CreatingPluginsv7.4.0-IncludingPluginsinEJBCA">
        <h1 class="heading p1"><span>Including Plugins in EJBCA</span></h1>
<p  class="p1" 
>There are two methods of creating and including your own plugins in EJBCA:</p>
<ul class=" "><li class="p1 "><p   
><a   href="#src-85928947_id-.CreatingPluginsv7.4.0-IncludingExternalJARsontheClasspath">Including External JARs on the Classpath</a></p>
</li><li class="p1 "><p   
><a   href="#src-85928947_id-.CreatingPluginsv7.4.0-IncludingExternalSourceDirectories">Including External Source Directories</a></p>
</li></ul>    <div class="section section-2" id="src-85928947_id-.CreatingPluginsv7.4.0-IncludingExternalJARsontheClasspath">
        <h2 class="heading p1"><span>Including External JARs on the Classpath </span></h2>
<p   
>This may be the easier method for some and involves pre-compiling your own JAR (preferably using one of our plugin interfaces and a manifest file, see below) and making sure it's available on the classpath. To enable this:</p>
<ol class=" "><li class=" "><p   
>Modify the file <tt class=" ">plugin.properties.sample</tt> (renaming it to for example <tt class=" ">widget.properties</tt>) and place it in either <tt class=" ">conf/plugins</tt> in your local EJBCA directory or under <tt class=" ">ejbca_custom/conf/plugins </tt>if you're using an external configuration directory.</p>
</li><li class=" "><p   
>Make sure that the file contains the following line where the directory points to the location of your compiled JAR file.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">plugin.ejbca.lib.dir=/home/demo/myplugin/dist/</code></div>
</div>
    </div>
</li></ol>    </div>
    <div class="section section-2" id="src-85928947_id-.CreatingPluginsv7.4.0-IncludingExternalSourceDirectories">
        <h2 class="heading "><span>Including External Source Directories</span></h2>
<p   
>The other variant is to create a source directory alongside EJBCA from which EJBCA can copy source files from. While this variant may be simpler to maintain due to sourcing the EJBCA libs directly from EJBCA, it may also be more difficult to set up a development environment against. To enable this:</p>
<ol class=" "><li class=" "><p   
>Modify the file <tt class=" ">plugin.properties.sample</tt> (renaming it to for example <tt class=" ">widget.properties</tt>) and place it in either <tt class=" ">conf/plugins</tt> in your local EJBCA directory or under <tt class=" ">ejbca_custom/conf/plugins</tt> if you're using an external configuration directory.</p>
</li><li class=" "><p   
>Make sure that the file contains the following line to point to the build file of your plugin.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">plugin.ejbca.ant.file=/home/demo/myplugin/build.xml</code></div>
</div>
    </div>
</li></ol><p   
>For more information on setting this up, see <tt class=" ">plugin.properties.sample</tt>.</p>
    </div>
    <div class="section section-2" id="src-85928947_id-.CreatingPluginsv7.4.0-SamplePlugin">
        <h2 class="heading "><span>Sample Plugin</span></h2>
<p   
>A basic sample plugin is provided in the directory <tt class=" ">src/samples/plugins</tt>. It contains a web application and an EJB bean.</p>
<p   
>To deploy and test the plugin, run the following:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">ant build -Dejbca.plugin.conf.path=/home/user/Dev/workspace/ejbca-trunk/src/samples/plugins</code></div>
<div class="line"><code class="plain">ant deployear </code></div>
</div>
    </div>
<p   
>You can then access the plugin webapp at http://localhost:8080/ejbca/pluginweb/.</p>
<p   
>For more information, refer to the <strong class=" ">README</strong> file located in the directory <tt class=" ">src/samples/plugins</tt>.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85928947_id-.CreatingPluginsv7.4.0-PluginInterfaces">
        <h1 class="heading "><span>Plugin Interfaces </span></h1>
<p   
>Several plugin interfaces allow you to extend functionality using your own classes. Using any of the following interfaces, including a manifest file in the JAR and making sure that the JAR is available on the classpath (see <a   href="#src-85928947_id-.CreatingPluginsv7.4.0-IncludingExternalJARsontheClasspath">Including External JARs on the Classpath</a>) during the construction of the EJBCA EAR, will lead to the plugins automatically appearing where relevant.</p>
    <div  class="tablewrap">
        <table class="relative-table wrapped confluenceTable">
                    <colgroup>
                                    <col  width="16%"/>
                                    <col  width="61%"/>
                                    <col  width="21%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="highlight-blue confluenceTh" rowspan="1" colspan="1">
    <p   
>Type</p>
            </td>
                <td  class="highlight-blue confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
                <td  class="highlight-blue confluenceTh" rowspan="1" colspan="1">
    <p   
>Documentation</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Certificate Extensions</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Customized Extensions can be added and removed in the <strong class=" ">Custom Certificate Extensions</strong> tab in the <strong class=" ">System Configuration</strong> page. <strong class=" ">Interface:</strong> org.cesecore.certificates.certificate.certextensions.CustomCertificateExtension</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a   href="Custom_Certificate_Extensions.html">Custom Certificate Extensions</a></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Email Notification Recipients</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>E-mail notifications can be sent when status changes for an end entity, for example when a new user is added.<br/><strong class=" ">Interface: </strong>    <span style="color: #172b4d;">
org.ejbca.core.model.ra.raadmin.ICustomNotificationRecipient    </span>
</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a   href="E-mail_Notifications.html">E-mail Notifications</a></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Publishers</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>While EJBCA hosts a vast array of different types of publishers, you can easily create your own as well.<br/><strong class=" ">Interface: </strong>org.ejbca.core.model.ca.publisher.ICustomPublisher</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a   href="Custom_Publishers.html">Custom Publishers</a></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Request Processors</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>A request processor is a plugin which in some way modifies or acts upon an incoming CSR before issuing certificates.<br/><strong class=" ">Interface: </strong>org.cesecore.certificates.ca.ExtendedUserDataHandler</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a   href="http://confluence.primekey.com/display/EJBCADS/.Creating+Custom+Request+Processors+v7.4.0">Creating Custom Request Processors</a></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Services</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>It is possible to write customized component plugins that can be used with other standards (or customized plugins).<br/><strong class=" ">Interface: </strong>    <span style="color: #000000;">
org.ejbca.core.model.services.IWorker    </span>
</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a   href="Services.html">Services</a></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>User Data Sources</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>The User Data Sources framework allows importing user data from existing databases and enables importing user data from an LDAP and AD.<br/><strong class=" ">Interface: </strong>    <span style="color: #172b4d;">
org.ejbca.core.model.ra.userdatasource.ICustomUserDataSource    </span>
</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
><a   href="User_Data_Sources.html">User Data Sources</a></p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>Since EJBCA is open source, you can modify anything you like, or use any of the interfaces and create your own add-ons. For more information on how to manage add-ons and plugins, see <a   href="Adding_Rules_to_Regulate_Values_of_End_Entity_Fields.html">Adding Rules to Regulate Values of End Entity Fields</a>.</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Handling_Configurations_in_a_Separate_Directory.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Handling Configurations in a Separate Directory</span>
        </a>
                <a href="Customizing_the_User_Interface.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Customizing the User Interface</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Installation and Deployment - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=85920801"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                     <li><a href="Troubleshooting_Guide.html">Troubleshooting Guide</a></li>
                                                            </ul>
</div>            <h1 id="src-85920801"> <span>Installation and Deployment</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p  class="faq" 
>The following provides information for troubleshooting installation and deployment issues. To view general troubleshooting tips and search for troubleshooting topics, see <a   href="Troubleshooting_Guide.html">EJBCA Troubleshooting</a>.</p>
<p  class="faq" 
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldHRpbWVvdXRzYW5kL29yZXJyb3JzZHVyaW5nc3RhcnR1cG9mSkJvc3MvV2lsZGZseTEw">I get timeouts and/or errors during startup of JBoss/Wildfly10</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGFuZXJyb3J3aXRoIkphdmFoZWFwc3BhY2Uid2hlbmJ1aWxkaW5nRUpCQ0EoZHVyaW5nYW50ZGVwbG95KT8">I get an error with &quot;Java heap space&quot; when building EJBCA (during ant deploy)?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtTXlpbnN0YWxsYXRpb25mYWlsZWRmb3Jzb21lcmVhc29udGhhdGlzbm93Zml4ZWQsaG93ZG9JcHJvY2VlZD8">My installation failed for some reason that is now fixed, how do I proceed?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGVycm9yc2R1cmluZydhbnRkZXBsb3llYXInb3InYW50cnVuaW5zdGFsbCcu">I get errors during 'ant deployear' or 'ant runinstall'.</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGFuZXJyb3J3aXRoIklsbGVnYWxrZXlsZW5ndGgid2hlbnVzaW5nRUpCQ0E_">I get an error with &quot;Illegal key length&quot; when using EJBCA?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtQWZ0ZXJhbnVwZ3JhZGVJZ2V0YSJqYXZhLmxhbmcuTm9TdWNoTWV0aG9kRXJyb3IiZXJyb3JhY2Nlc3Npbmd0aGVVSS4">After an upgrade I get a &quot;java.lang.NoSuchMethodError&quot; error accessing the UI.</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtRHVyaW5ndGhlYnVpbGRwcm9jZXNzSWdldGVycm9yc2xpa2U6QlVJTERGQUlMRUQvdXNyL2VqYmNhL2J1aWxkLnhtbDo3ODk6amF2YS5sYW5nLkV4Y2VwdGlvbkluSW5pdGlhbGl6ZXJFcnJvcg">During the build process I get errors like: BUILD FAILED /usr/ejbca/build.xml:789: java.lang.ExceptionInInitializerError</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtV2hlcmVpc3RoZWxvZ2ZpbGVzdG9yZWRmb3J0cmFja2luZ2Vycm9yc2FuZGRlYnVnaW5mb3JtYXRpb24_">Where is the log file stored for tracking errors and debug information?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JY29uZmlndXJlbG9nbGV2ZWxpbkpCb3NzPw">How do I configure log level in JBoss?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JbW9kaWZ5dGhlUHVibGljV2VicGFnZXM_">How do I modify the Public Web pages?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_id-.InstallationandDeploymentv7.4.0-IgetanerrormessagewhenaccessingtheCAUI">I get an error message when accessing the CA UI</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtUHJvYmxlbTpFcnJvcm1lc3NhZ2UiQ291bGRub3Rlc3RhYmxpc2hhbmVuY3J5cHRlZGNvbm5lY3Rpb25iZWNhdXNleW91cmNlcnRpZmljYXRld2FzcmVqZWN0ZWQuLi5FcnJvcmNvZGU6LTEyMjI0IndoZW5hY2Nlc3Npbmd0aGVDQVdlYi4">Problem: Error message &quot;Could not establish an encrypted connection because your certificate was rejected ... Error code: -12224&quot; when accessing the CA Web.</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_id-.InstallationandDeploymentv7.4.0-TroubleshootingSteps">Troubleshooting Steps</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGFibGFua3BhZ2VvbnRoZVVJYWZ0ZXJzdGFydD8">I get a blank page on the UI after start?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtV2hlbnJ1bm5pbmcnYW50cnVuaW5zdGFsbCdvcmNyZWF0aW5nSktTb3JQS0NTMTJmaWxlc3lvdWNhbid0dXNlbG9uZ2VycGFzc3dvcmR0aGFuN2NoYXJhY3RlcnMuQW55dGhpbmdsb25nZXJnaXZlc2FuZXJyb3I_">When running 'ant runinstall' or creating JKS or PKCS12 files you can't use longer password than 7 characters. Anything longer gives an error?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JbWFuaXB1bGF0ZUVKQkNBLWtleXN0b3Jlc3VzaW5nSkFWQSdza2V5dG9vbD8">How do I manipulate EJBCA-keystores using JAVA's keytool?</a></p>
</li><li class=" "><p   
><a   href="#src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JbWFrZWFrZXlzdG9yZXVzaW5na2V5dG9vbHdpdGhhcmVhbGNlcnRpZmljYXRlZnJvbUVKQkNBPw">How do I make a keystore using keytool with a real certificate from EJBCA?</a></p>
</li></ul>    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldHRpbWVvdXRzYW5kL29yZXJyb3JzZHVyaW5nc3RhcnR1cG9mSkJvc3MvV2lsZGZseTEw">
        <h1 class="heading faq"><span>I get timeouts and/or errors during startup of JBoss/Wildfly10</span></h1>
<p   
>Ensure that the application server has enough cores (more than one), enough CPU (otherwise timeouts will occur) and enough memory (will also slow down the system).</p>
<p   
>Ensure that database indexes are applied, otherwise database searches get very slow as your database size grows.</p>
<p   
>The following SQL file that is ready to run on your database contains a set of recommended database indexes that can be applied to your database:</p>
<ul class=" "><li class=" "><p   
><tt class=" ">doc/sql-scripts/create-index-ejbca.sql</tt>.</p>
</li></ul><p   
>For more information, see <a   href="Creating_the_Database.html">Creating the Database</a>.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGFuZXJyb3J3aXRoIkphdmFoZWFwc3BhY2Uid2hlbmJ1aWxkaW5nRUpCQ0EoZHVyaW5nYW50ZGVwbG95KT8">
        <h1 class="heading faq"><span>I get an error with &quot;Java heap space&quot; when building EJBCA (during ant deploy)?</span></h1>
<p   
>This error is because the default maximum allowed memory allocation for JAVA is set too low in your environment.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtTXlpbnN0YWxsYXRpb25mYWlsZWRmb3Jzb21lcmVhc29udGhhdGlzbm93Zml4ZWQsaG93ZG9JcHJvY2VlZD8">
        <h1 class="heading faq"><span>My installation failed for some reason that is now fixed, how do I proceed?</span></h1>
<p   
>The best way to recover is usually o start over from scratch:</p>
<ul class=" "><li class=" "><p   
>Stop JBoss</p>
</li><li class=" "><p   
>Make sure the database is clean</p>
</li><li class=" "><p   
>Deploy and install EJBCA</p>
</li><li class=" "><p   
>Stop JBoss and check that it stops without problems</p>
</li><li class=" "><p   
>Start JBoss and check that it starts without problems</p>
</li><li class=" "><p   
>Remove the old superadmin.p12 in you browser and import the newly generated one</p>
</li></ul>    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGVycm9yc2R1cmluZydhbnRkZXBsb3llYXInb3InYW50cnVuaW5zdGFsbCcu">
        <h1 class="heading faq"><span>I get errors during 'ant deployear' or 'ant runinstall'.</span></h1>
<p   
>This is most usually due to a database configuration error. In the server log (JBOSS_HOME/standalone/log/server.log) you will probably see some SQLException errors. You should then:</p>
<ul class=" "><li class=" "><p   
>Make sure the settings in conf/database.properties are correct</p>
</li><li class=" "><p   
>Make sure your configuration of the database in JBoss/WildFly is correct</p>
</li><li class=" "><p   
>Follow the guidelines from &quot;My installation failed for some reason that is now fixed, how do I proceed?&quot;</p>
</li></ul><p   
>See the configuration and troubleshooting section in doc/howto/HOWTO-database.txt for additional database related information.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGFuZXJyb3J3aXRoIklsbGVnYWxrZXlsZW5ndGgid2hlbnVzaW5nRUpCQ0E_">
        <h1 class="heading faq"><span>I get an error with &quot;Illegal key length&quot; when using EJBCA?</span></h1>
<p   
>This is because you are using Oracle JDK (instead of OpenJDK) and have not installed the &quot;Unlimited Strength Crypto Policy Files&quot;. See the <a  class="external-link" href="https://www.ejbca.org/docs/installation.html#Prerequisites">prerequisites</a> section in the the installation guide. Even if you think you have installed them, you have not. This error is simple and unique.</p>
<p   
>It may also be that you are trying to enroll for a certificate passing in a public key with length that is shorter than the required key length specified in the Certificate Profile.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtQWZ0ZXJhbnVwZ3JhZGVJZ2V0YSJqYXZhLmxhbmcuTm9TdWNoTWV0aG9kRXJyb3IiZXJyb3JhY2Nlc3Npbmd0aGVVSS4">
        <h1 class="heading faq"><span>After an upgrade I get a &quot;java.lang.NoSuchMethodError&quot; error accessing the UI.</span></h1>
<p   
>JBoss is bad at cleaning temporary files, sometimes we have to help. Remove the directories JBOSS_HOME/standalone/tmp and restart JBoss.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtRHVyaW5ndGhlYnVpbGRwcm9jZXNzSWdldGVycm9yc2xpa2U6QlVJTERGQUlMRUQvdXNyL2VqYmNhL2J1aWxkLnhtbDo3ODk6amF2YS5sYW5nLkV4Y2VwdGlvbkluSW5pdGlhbGl6ZXJFcnJvcg">
        <h1 class="heading faq"><span>During the build process I get errors like: BUILD FAILED /usr/ejbca/build.xml:789: java.lang.ExceptionInInitializerError</span></h1>
<p   
>You probably have ant pre-installed as a package from Fedora or Suse. Those pre-installations does not contain all default ant modules. You need the &quot;optional tasks&quot; included in the official ant distribution. Either add modules to the installed ant, or download the latest ant from <a  class="external-link" href="http://ant.apache.org/">http://ant.apache.org/</a>.</p>
<p   
>A simple fix is to change the /etc/ant.conf to point to your user installed ant (in /your/ant/home). Change from:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">#</code></div>
<div class="line"><code class="comments"># ant.conf (Ant 1.6.x)</code></div>
<div class="line"><code class="comments"># JPackage Project (http://www.jpackage.org/)</code></div>
<div class="line"><code class="comments">#</code></div>
<div class="line"> </div>
<div class="line"><code class="comments"># Validate --noconfig setting in case being invoked</code></div>
<div class="line"><code class="comments"># from pre Ant 1.6.x environment</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> [ -z </code><code class="string">"$no_config"</code><code class="plain"> ] ; </code><code class="keyword">then</code></div>
<div class="line"><code class="plain">no_config=</code><code class="functions">true</code></div>
<div class="line"><code class="keyword">fi</code></div>
<div class="line"> </div>
<div class="line"><code class="comments"># Setup ant configuration</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> $no_config ; </code><code class="keyword">then</code></div>
<div class="line"><code class="comments"># Disable RPM layout</code></div>
<div class="line"><code class="plain">rpm_mode=</code><code class="functions">false</code></div>
<div class="line"><code class="keyword">else</code></div>
<div class="line"><code class="comments"># Use RPM layout</code></div>
<div class="line"><code class="plain">rpm_mode=</code><code class="functions">true</code></div>
<div class="line"> </div>
<div class="line"><code class="comments"># ANT_HOME for rpm layout</code></div>
<div class="line"><code class="plain">ANT_HOME=</code><code class="plain">/usr/share/ant</code></div>
<div class="line"><code class="keyword">fi</code><code class="plain">     </code></div>
</div>
    </div>
<p   
>to</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">#</code></div>
<div class="line"><code class="comments"># ant.conf (Ant 1.6.x)</code></div>
<div class="line"><code class="comments"># JPackage Project (http://www.jpackage.org/)</code></div>
<div class="line"><code class="comments">#</code></div>
<div class="line"> </div>
<div class="line"><code class="comments"># Validate --noconfig setting in case being invoked</code></div>
<div class="line"><code class="comments"># from pre Ant 1.6.x environment</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> [ -z </code><code class="string">"$no_config"</code><code class="plain"> ] ; </code><code class="keyword">then</code></div>
<div class="line"><code class="plain">no_config=</code><code class="functions">true</code></div>
<div class="line"><code class="keyword">fi</code></div>
<div class="line"> </div>
<div class="line"><code class="comments"># Setup ant configuration</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> $no_config ; </code><code class="keyword">then</code></div>
<div class="line"><code class="comments"># Disable RPM layout</code></div>
<div class="line"><code class="plain">rpm_mode=</code><code class="functions">false</code></div>
<div class="line"><code class="keyword">else</code></div>
<div class="line"><code class="comments"># Use RPM layout</code></div>
<div class="line"><code class="plain">rpm_mode=</code><code class="functions">false</code></div>
<div class="line"> </div>
<div class="line"><code class="comments"># ANT_HOME for rpm layout</code></div>
<div class="line"><code class="plain">ANT_HOME=</code><code class="plain">/your/ant/home</code></div>
<div class="line"><code class="keyword">fi</code></div>
</div>
    </div>
<p   
>For Ubuntu, things are much easier, just 'sudo apt-get install ant' and 'sudo apt-get install ant-optional'.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtV2hlcmVpc3RoZWxvZ2ZpbGVzdG9yZWRmb3J0cmFja2luZ2Vycm9yc2FuZGRlYnVnaW5mb3JtYXRpb24_">
        <h1 class="heading faq"><span>Where is the log file stored for tracking errors and debug information?</span></h1>
<p   
>JBOSS_HOME/standalone/log/server.log.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JY29uZmlndXJlbG9nbGV2ZWxpbkpCb3NzPw">
        <h1 class="heading faq"><span>How do I configure log level in JBoss?</span></h1>
<p   
>You can configure logging in JBoss to be able to dynamically change logging.</p>
<p   
>For production systems, INFO log level is recommended:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.ejbca:add(level=INFO)</code></div>
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore:add(level=INFO)</code></div>
</div>
    </div>
<p   
>To later enable DEBUG log level, if needed, use the following:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.ejbca:write-attribute(name=level, value=DEBUG)</code></div>
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore:write-attribute(name=level, value=DEBUG)</code></div>
</div>
    </div>
<p   
>For more information on     <span style="color: #1c1e29;">
application server-specific instructions, see <a   href="Application_Servers.html">Application Servers</a>.    </span>
</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JbW9kaWZ5dGhlUHVibGljV2VicGFnZXM_">
        <h1 class="heading faq"><span>How do I modify the Public Web pages?</span></h1>
<p  class="faq" 
>You can add your own static pages under <a  class="external-link" href="http://hostname:8080/ejbca/">http://hostname:8080/ejbca/</a> by doing the following:</p>
<ol class=" "><li class=" "><p   
>Put your files (static HTML is easy) under <tt class=" ">modules/publicweb-gui/resources/</tt></p>
</li><li class=" "><p   
>Do a full build.</p>
</li><li class=" "><p   
>Redeploy.</p>
</li></ol><p   
>For more information, see <a   href="Customizing_the_User_Interface.html">Customizing the User Interface</a>.</p>
    </div>
    <div class="section section-1" id="src-85920801_id-.InstallationandDeploymentv7.4.0-IgetanerrormessagewhenaccessingtheCAUI">
        <h1 class="heading faq"><span>I get an error message when accessing the CA UI</span></h1>
    <div class="section section-2" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtUHJvYmxlbTpFcnJvcm1lc3NhZ2UiQ291bGRub3Rlc3RhYmxpc2hhbmVuY3J5cHRlZGNvbm5lY3Rpb25iZWNhdXNleW91cmNlcnRpZmljYXRld2FzcmVqZWN0ZWQuLi5FcnJvcmNvZGU6LTEyMjI0IndoZW5hY2Nlc3Npbmd0aGVDQVdlYi4">
        <h2 class="heading faq"><span>Problem: Error message &quot;Could not establish an encrypted connection because your certificate was rejected ... Error code: -12224&quot; when accessing the CA Web.</span></h2>
    </div>
    <div class="section section-2" id="src-85920801_id-.InstallationandDeploymentv7.4.0-TroubleshootingSteps">
        <h2 class="heading faq"><span>Troubleshooting Steps</span></h2>
<ol class=" "><li class=" "><p   
>Make sure you have imported to correct superadmin.p12 in your browser.</p>
<ol class=" "><li class=" "><p   
>You may have to delete and import the CA certificate in your application server trust-store by running the following:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">ant javatruststore</code></div>
</div>
    </div>
</li><li class=" "><p   
>You can also import another CA than the initial ManagementCA (My CA in the example), using the following command:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">ant -Dca.name=</code><code class="string">"My CA"</code><code class="plain"> javatruststore</code></div>
</div>
    </div>
</li><li class=" "><p   
>Make sure you restart JBoss after making changes to the java trust store.</p>
</li></ol></li><li class=" "><p   
>Perhaps the JBoss configuration was not done automatically because you are running another configuration than 'default' in JBoss. Generally, the server configuration is located in the file <tt class=" ">JBOSS_HOME/standaone/configuration/standalone.xml.</tt></p>
</li><li class=" "><p   
>Also the file <tt class=" ">$EJBCA_HOME/p12/tomcat.jks</tt> must be copied to <tt class=" ">$JBOSS_HOME/standalone/configuration/keystore/keystore.jks,</tt> where 'standalone' should be replaced with the JBoss configuration you are using.</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSWdldGFibGFua3BhZ2VvbnRoZVVJYWZ0ZXJzdGFydD8">
        <h1 class="heading faq"><span>I get a blank page on the UI after start?</span></h1>
<p   
>Either you entered a hostname (in httpsserver.hostname in web.properties) that does not resolve to the machine where EJBCA is running during setup, or you changed the port that JBoss listens to. Make sure the hostname resolves to the machine EJBCA is running on.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtV2hlbnJ1bm5pbmcnYW50cnVuaW5zdGFsbCdvcmNyZWF0aW5nSktTb3JQS0NTMTJmaWxlc3lvdWNhbid0dXNlbG9uZ2VycGFzc3dvcmR0aGFuN2NoYXJhY3RlcnMuQW55dGhpbmdsb25nZXJnaXZlc2FuZXJyb3I_">
        <h1 class="heading faq"><span>When running 'ant runinstall' or creating JKS or PKCS12 files you can't use longer password than 7 characters. Anything longer gives an error?</span></h1>
<p   
>Note, this is only relevant to OracleJDK. OpenJDK does not have this restriction.</p>
<p   
>If you want to use strong crypto and/or password longer than 7 characters in keystores you must install the 'Unlimited Strength Jurisdiction Policy Files' for JDK. The policy files can be found at the same place as the JDK download. Further information on this can be found in the Sun documentation on the JCE.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JbWFuaXB1bGF0ZUVKQkNBLWtleXN0b3Jlc3VzaW5nSkFWQSdza2V5dG9vbD8">
        <h1 class="heading faq"><span>How do I manipulate EJBCA-keystores using JAVA's keytool?</span></h1>
<p   
>EJBCA supports the PKCS12 format for the keystore because it is a standard, and we like standards. Normally keytool (e.g. Java's) can read PKCS12 file but not write, so the BouncyCastle JCE is needed to handle PKCS12 keystores.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">keytool -list -alias privateKey -keystore server.p12 -storetype PKCS12 -storepass foo123 -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath $EJBCA_HOME/lib/bcprov-jdk15on-</code><code class="value">159</code><code class="plain">.jar</code></div>
</div>
    </div>
<p   
>It should be possible to import etc as well using keytool.</p>
    </div>
    <div class="section section-1" id="src-85920801_safe-id-aWQtLkluc3RhbGxhdGlvbmFuZERlcGxveW1lbnR2Ny40LjAtSG93ZG9JbWFrZWFrZXlzdG9yZXVzaW5na2V5dG9vbHdpdGhhcmVhbGNlcnRpZmljYXRlZnJvbUVKQkNBPw">
        <h1 class="heading faq"><span>How do I make a keystore using keytool with a real certificate from EJBCA?</span></h1>
<p   
>First generate a new keystore and a key pair:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">$ keytool -genkey -</code><code class="functions">alias</code><code class="plain"> mykey -keystore myks.jks -keyalg RSA -dname c=SE,O=AnaTom,CN=Test -keypass foo123 -storepass foo123</code></div>
</div>
    </div>
<p   
>You SUN keystore is now in the file 'myks.jks'. Next generate a certification request (PKCS10):</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">$ keytool -certreq -</code><code class="functions">alias</code><code class="plain"> mykey -sigalg SHA1WithRSA -</code><code class="functions">file</code><code class="plain"> myreq.p10 -keypass foo123 -keystore myks.jks -storepass foo123</code></div>
</div>
    </div>
<p   
>You now have the certification request in the file 'myreq.p10'. Open up EJBCA request page in your favorite browser, '<a  class="external-link" href="http://127.0.0.1:8080/ejbca">http://127.0.0.1:8080/ejbca</a>', and select the link for NOT having a browser' Download the Root CA certificate by clicking on the link. Save the certificate as 'ca.pem'. Enter the username and password of a valid user with status NEW, see question 'Why do I get the exception/error:' above. Copy and paste the contents of the certification request, 'myreq.p10' into the text field. Save the returned certificate as 'cert.pem'.</p>
<p   
>Next import the Root CA certificate into the keystore 'myks.jks':</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">$ keytool -</code><code class="functions">import</code><code class="plain"> -</code><code class="functions">alias</code><code class="plain"> cacert -</code><code class="functions">file</code><code class="plain"> ca.pem -keystore myks.jks -storepass foo123</code></div>
</div>
    </div>
<p   
>Import the certificate reply into the keystore:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">$ keytool -</code><code class="functions">import</code><code class="plain"> -</code><code class="functions">alias</code><code class="plain"> mykey -</code><code class="functions">file</code><code class="plain"> cert.pem -keystore myks.jks -storepass foo123 -keypass foo123</code></div>
</div>
    </div>
<p   
>Now you can take a look at your SUN keystore with:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">$ keytool -list -keystore myks.jks</code></div>
</div>
    </div>
<p   
>In theory, you can use the same method with a BouncyCastle PKCS12 keystore by adding the following arguments to every command above:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">-provider org.bouncycastle.jce.provider.BouncyCastleProvider -storetype PKCS12 -providerpath $EJBCA_HOME/lib/bcprov-jdk15on-</code><code class="value">161</code><code class="plain">.jar</code></div>
</div>
    </div>
<p   
>Unfortunately a bug in keytool prevents this from functioning properly at the moment, therefore we recommend using the 'bin/ejbca.sh ca' to create PKCS12 keystores. It can be used to create keystores generally, not just for CAs.</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Cryptography_and_Security.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Cryptography and Security</span>
        </a>
                <a href="Enrollment_Questions.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Enrollment Questions</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

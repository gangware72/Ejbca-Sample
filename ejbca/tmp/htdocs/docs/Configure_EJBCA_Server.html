<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Configure EJBCA Server - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=93592111"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Integration.html">EJBCA Integration</a></li>
                                                                                                         <li class="shortcut"><a href="Integrating_with_Third-Party_Applications.html">Integrating with Third-Party Applications</a></li>
                                                                                     <li><a href="Microsoft_Intune_Device_Certificate_Enrollment.html">Microsoft Intune Device Certificate Enrollment</a></li>
                                                            </ul>
</div>            <h1 id="src-93592111"> <span>Configure EJBCA Server</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>The following sections cover how to configure the EJBCA server.</p>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-93592111_id-.ConfigureEJBCAServerv7.4.1-LaunchanEJBCAEnterpriseCloudServerfromAWS">Launch an EJBCA Enterprise Cloud Server from AWS</a></p>
</li><li class=" "><p   
><a   href="#src-93592111_id-.ConfigureEJBCAServerv7.4.1-CertificateAuthoritySetup">Certificate Authority Set up</a></p>
</li><li class=" "><p   
><a   href="#src-93592111_id-.ConfigureEJBCAServerv7.4.1-ConfigureSCEP">Configure SCEP</a></p>
</li><li class=" "><p   
><a   href="#src-93592111_safe-id-aWQtLkNvbmZpZ3VyZUVKQkNBU2VydmVydjcuNC4xLU5leHRTdGVwOkNvbmZpZ3VyZUludHVuZWZvckRldmljZUNlcnRpZmljYXRlRW5yb2xsbWVudA">Next Step: Configure Intune for Device Certificate Enrollment</a></p>
</li></ul>    <div class="section section-1" id="src-93592111_id-.ConfigureEJBCAServerv7.4.1-LaunchanEJBCAEnterpriseCloudServerfromAWS">
        <h1 class="heading "><span>Launch an EJBCA Enterprise Cloud Server from AWS</span></h1>
<p   
>For instructions on how to deploy EJBCA Cloud from Amazon Web Services (AWS) and log in to the EJBCA Admin Web for the first time, refer to the <a  class="external-link" href="https://doc.primekey.com/x/hgNM">EJBCA Cloud AWS Launch Guide</a>.</p>
    </div>
    <div class="section section-1" id="src-93592111_id-.ConfigureEJBCAServerv7.4.1-CertificateAuthoritySetup">
        <h1 class="heading "><span>Certificate Authority Set up </span></h1>
<p   
>If you do not already have Certificate Authorities (CAs) configured in EJBCA, follow the <a  class="external-link" href="https://doc.primekey.com/x/qANM">EJBCA Enterprise Quick Start Guide</a> to set up a 2 Tier CA Hierarchy.</p>
    <div class="section section-2" id="src-93592111_id-.ConfigureEJBCAServerv7.4.1-ModifyWorkstationEndEntityProfile">
        <h2 class="heading "><span>Modify Workstation End Entity Profile</span></h2>
<p   
>    <span style="color: #000000;">
The Intune device certificates use an Organizational Unit in the Subject DN Attributes. Since this attribute was not added following the    </span>
 <a  class="external-link" href="https://doc.primekey.com/x/xwNM">Create End Entity Profiles</a>     <span style="color: #000000;">
instructions in the EJBCA Cloud AWS Quick Start Guide, do the following to add the attribute in the Corporate Workspace End Entity Profile:    </span>
</p>
<ol class=" "><li class=" "><p   
>    <span style="color: #000000;">
Under <strong class=" ">RA Functions</strong>, select <strong class=" ">End Entity Profiles</strong>.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
Edit the <strong class=" ">Corporate Workspace EE Profile</strong> and under <strong class=" ">Subject DN Attributes</strong>, select the (OU) Organizational Unit field for subject DN, and click <strong class=" ">Add</strong>.    </span>
</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/93592111/image2019-10-1_17-45-39.png" alt="images/download/attachments/93592111/image2019-10-1_17-45-39.png"  height="250" />
    </li><li class=" "><p   
>    <span style="color: #172b4d;">
Click     </span>
<strong class=" ">Save</strong>    <span style="color: #172b4d;">
 to save the Corporate Workspace End Entity Profile.    </span>
</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-93592111_id-.ConfigureEJBCAServerv7.4.1-ConfigureSCEP">
        <h1 class="heading "><span>Configure SCEP</span></h1>
<p   
>    <span style="color: #000000;">
Follow the steps below to create a SCEP alias to issue certificates managed by Intune.    </span>
</p>
    <div class="section section-2" id="src-93592111_id-.ConfigureEJBCAServerv7.4.1-CreateNewSCEPAlias">
        <h2 class="heading "><span>Create New SCEP Alias</span></h2>
<p   
>    <span style="color: #000000;">
To create a new SCEP alias:    </span>
</p>
<ol class=" "><li class=" "><p   
>    <span style="color: #000000;">
Login to EJBCA and click <strong class=" ">SCEP Configuration</strong> under <strong class=" ">System Configuration</strong>.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
Click     </span>
<strong class=" ">    <span style="color: #000000;">
Add    </span>
</strong>    <span style="color: #000000;">
.    </span>
<strong class=" "><br/></strong><img  class="confluence-embedded-image confluence-thumbnail"  src="images/download/thumbnails/93592111/create_scep_1.png" alt="images/download/thumbnails/93592111/create_scep_1.png" width="200"  />
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
Specify a name for the new alias, in this example <strong class=" ">intune</strong>, and then click <strong class=" ">OK</strong>.    </span>
</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/93592111/create_scep_2.png" alt="images/download/attachments/93592111/create_scep_2.png" width="350"  />
    <p   
><img  class="emoticon emoticon-warning"  src="images/s/-98b7og/8401/7d0034e810b0e95b8c0694abfaf748cf5135c15a/_/images/icons/emoticons/warning.svg" alt="images/s/-98b7og/8401/7d0034e810b0e95b8c0694abfaf748cf5135c15a/_/images/icons/emoticons/warning.svg"   />
     <span style="color: #000000;">
The alias name does not have to be <strong class=" ">intune</strong> - that name is used in this example to align with configuring EJBCA to integrate with Intune.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
The new SCEP alias is added to the list of aliases. Next, proceed to    </span>
 <a   href="#src-93592111_id-.ConfigureEJBCAServerv7.4.1-ConfigureIntuneSCEPAlias">configure the Intune SCEP Alias</a>.</p>
</li></ol>    </div>
    <div class="section section-2" id="src-93592111_id-.ConfigureEJBCAServerv7.4.1-ConfigureIntuneSCEPAlias">
        <h2 class="heading "><span>Configure Intune SCEP Alias</span></h2>
<p   
>    <span style="color: #000000;">
To configure the newly created Intune SCEP alias:    </span>
</p>
<ol class=" "><li class=" "><p   
>    <span style="color: #000000;">
Click the <strong class=" ">intune</strong> SCEP alias.    </span>
</p>
<img  class="confluence-embedded-image confluence-thumbnail"  src="images/download/thumbnails/93592111/create_scep_3.png" alt="images/download/thumbnails/93592111/create_scep_3.png" width="200"  />
    </li><li class=" "><p   
>    <span style="color: #000000;">
Click <strong class=" ">Switch to edit mode</strong>.    </span>
</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/93592111/create_scep_4.png" alt="images/download/attachments/93592111/create_scep_4.png" width="350"  />
    </li><li class=" "><p   
>    <span style="color: #000000;">
Edit the SCEP alias settings according to the following:    </span>
</p>
<ul class=" "><li class=" "><p   
>    <span style="color: #000000;">
Operational mode: Select <strong class=" ">RA</strong>.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">Authenticate through Microsoft Intune</strong>: Select.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">RA End Entity Profile</strong>: Select.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">RA Certificate Profile</strong>: Select the <strong class=" ">Certificate Profile</strong> configured in the End Entity Profile.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">RA CA Name</strong>: Select the <strong class=" ">Issuing CA</strong> configured in the End Entity Profile.    </span>
</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">Application ID from Azure</strong>: Enter the ID obtained from following the procedure in    </span>
 <a   href="Configure_Intune.html">Configure Intune</a>.</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">Application API Secret from Azure</strong>: Enter the secret obtained from following the procedure in    </span>
 <a   href="Configure_Intune.html">Configure Intune</a>.</p>
</li><li class=" "><p   
>    <span style="color: #000000;">
<strong class=" ">Intune Tenant: </strong>Specify the Intune Tenant which is the fully qualified domain name (FQDN) of the organization configured in Intune.     </span>
</p>
<img  class="confluence-embedded-image"  src="images/download/attachments/93592111/create_scep_7.png" alt="images/download/attachments/93592111/create_scep_7.png" width="500"  />
    <p   
></p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>    <span style="color: #000000;">
The settings <strong class=" ">RA name generation scheme</strong>, <strong class=" ">RA name generation parameters</strong>, <strong class=" ">RA name generation prefix</strong>, and <strong class=" ">RA name generation postfix</strong> are left with the default values as depicted in the screenshot.    </span>
</p>
<p   
>    <span style="color: #000000;">
A <strong class=" ">Proxy</strong> was not required for EJBCA to connect to Intune. If a proxy is required then specify the applicable fields.    </span>
</p>
        </div>
    </div>
</li></ul></li><li class=" "><p   
>    <span style="color: #000000;">
Click <strong class=" ">Save</strong> to store the Intune SCEP alias configuration.<br/>    </span>
</p>
</li></ol>    </div>
    </div>
    <div class="section section-1" id="src-93592111_safe-id-aWQtLkNvbmZpZ3VyZUVKQkNBU2VydmVydjcuNC4xLU5leHRTdGVwOkNvbmZpZ3VyZUludHVuZWZvckRldmljZUNlcnRpZmljYXRlRW5yb2xsbWVudA">
        <h1 class="heading "><span>Next Step: Configure Intune for Device Certificate Enrollment</span></h1>
<p   
>Next, <a   href="Configure_Intune.html">Configure Intune for Device Certificate Enrollment</a>.</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Certificate_Enrollment_Requirements.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Certificate Enrollment Requirements</span>
        </a>
                <a href="Configure_Intune.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Configure Intune</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Partitioned Approval Profiles - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=42959132"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_CA_Concept_Guide.html">EJBCA CA Concept Guide</a></li>
                                                                                                         <li class="shortcut"><a href="Approvals.html">Approvals</a></li>
                                                                                     <li><a href="Approval_Profiles.html">Approval Profiles</a></li>
                                                            </ul>
</div>            <h1 id="src-42959132"> <span>Partitioned Approval Profiles</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <div class="section section-1" id="src-42959132_id-.PartitionedApprovalProfilesv7.1.0-Description">
        <h1 class="heading "><span>Description</span></h1>
<p   
>    <span style="color: #333333;">
Partitioned approvals consist of two basic temporal concepts: <strong class=" ">steps</strong> and <strong class=" ">partitions</strong>. The diagram below tries to explain this in simple terms:    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/partitioned.png" alt="images/download/attachments/42959132/partitioned.png" width="300"  />
    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
The basic concept is that     </span>
<strong class=" ">steps</strong>    <span style="color: #333333;">
 are solve sequentially, while     </span>
<strong class=" ">partitions</strong>    <span style="color: #333333;">
 are solved in parallel within their step. What this means is that (for example) Step2:Partition1 can't be approved until all three partitions in Step 1 have been approved. Now, how might this be used? Well, let's presume the following organization:    </span>
    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/advanced_org.png" alt="images/download/attachments/42959132/advanced_org.png" width="400"  />
    </span>
</p>
<p   
>This structure resembles an actual PKI organization far more. The players here are:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Alita</strong> - An RA Administrator whose role is to meet certificate applicants after they've enrolled using the RA UI and to verify their identities.</p>
</li><li class=" "><p   
><strong class=" ">Bj&ouml;rn</strong> - Works for Financial Services. Does not have any rights to enroll customers, but has been tasked in verifying that customers have payed their fees.</p>
</li><li class=" "><p   
><strong class=" ">Beatrix </strong>- Works for the company's security division. Lacks like Bj&ouml;rn the ability to enroll customers, but is tasked in performing background checks on prospective clients.</p>
</li><li class=" "><p   
><strong class=" ">Cilla </strong><strong class=" "></strong>- A supervisor who has to approve the work of the previous three. If she's happy, then the customer can next retrieve their certificate.</p>
</li></ul><p   
>    <span style="color: #333333;">
<br/>Now, looking at the graph above you may infer that Alita's, Bj&ouml;rn's and Beatrix' tasks are all part of Step 1. The reason for this is that Cilla isn't interested (or allowed) to give her approval until she's verified the results of Alita, Bj&ouml;rn and Beatrix.    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
On the other hand, there is nothing stopping Alita, Bj&ouml;rn and Beatrix from solving their tasks in parallel. Once all of them approved their respective partitions, the process will automatically transition to Step 2. Combining these two diagrams we get the following, with     </span>
    <span style="color: #0000ff;">
<strong class=" ">blue </strong>    </span>
    <span style="color: #333333;">
representing view access and     </span>
    <span style="color: #008000;">
<strong class=" ">green</strong>    </span>
    <span style="color: #333333;">
 representing approval rights:    </span>
    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/approvals.png" alt="images/download/attachments/42959132/approvals.png" width="500"  />
    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
So, what does this look like in EJBCA? Well, an initial Partitioned Profile will look like this:    </span>
    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.29.07.png" alt="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.29.07.png" width="800"  />
    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
As you can see above, we initially have a single step containing a single partition, which is the minimum possible. You'll also notice in the center of the partition the two multi-selects that display all available Roles with approval rights. Let's add another step by clicking on the     </span>
<strong class=" ">Add Step</strong>    <span style="color: #333333;">
 button on the bottom right:    </span>
    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.38.56.png" alt="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.38.56.png" width="800"  />
    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
Next lets create the partitions in Step 1. First we'll click the     </span>
<strong class=" ">Add Partition</strong>    <span style="color: #333333;">
 button on the bottom right of that step twice, name the partitions and assign the roles:    </span>
    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.42.50.png" alt="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.42.50.png" width="800"  />
    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
Notice above that the roles do not have view rights of each others' partitions (except the RA Administrator partition, who anybody can review), and that the Supervisor role can review all. Next, let's edit Alita's partition so that she can add a bit more information for the records:    </span>
    </span>
</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.47.38.png" alt="images/download/attachments/42959132/Screen_Shot_2018-01-04_at_16.47.38.png" width="800"  />
    </span>
</p>
<p   
>By clicking on the <strong class=" ">Add Field</strong> button (which is hidden in the above screenshot behind the drop-down) we can add meta data fields to the partition. In this case we've added a check box, a radio button list to identify the type of identification provided and a free form text field for any other information (such as passport number).</p>
<p   
>We'll set up Beatrix' and Bj&ouml;rn's partition in the same way, then lastly make sure that only the Supervisor group has approval and review access to the final step:</p>
<p   
>    <span style="color: #333333;">
<img  class="confluence-embedded-image"  src="images/download/attachments/42959132/Screen_Shot_2018-01-05_at_09.10.08.png" alt="images/download/attachments/42959132/Screen_Shot_2018-01-05_at_09.10.08.png" width="800"  />
    </span>
</p>
<p   
>    <span style="color: #333333;">
    <span style="color: #333333;">
This way the supervisor can review and verify that all previous actions have been performed correctly and without fault before allowing the enrollment process to continue.    </span>
<br/>    </span>
</p>
    </div>
    <div class="section section-1" id="src-42959132_id-.PartitionedApprovalProfilesv7.1.0-Fields">
        <h1 class="heading "><span>Fields</span></h1>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Field Name</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Name</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>The name of the partition.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Roles which may approve this partition</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Which roles that are allowed to approve or reject this partition.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Roles which may view this partition</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Which roles that are allowed to view this partition.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Data fields</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Data that should be collected when approving this partition. Different types of data are supported and as many fields as needed can be added.</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Data Type</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Check Box</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>To mark something as <i class=" ">yes</i> or <i class=" ">no</i>.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Number (Short)</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>A number of no more than 6 digits is expected to be entered.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Number (Long)</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>A longer number is expected to be entered.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Radio Button</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Several options are set and only one of them has to be chosen when approving the request.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Text Field</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>A longer text field</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>External URL</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Allows the approving RA administrator to enter a URL when approving. Will show up as a link when reviewing the approval.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
></p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Add notification</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Configure a note that will be sent to the administrators who can approve or reject this partition. See <a   href="Approving_Actions.html#src-75859643_id-.ApprovingActionsv7.2.1-Approval_Notification">Approval Notification</a> about what parameters are possible to use.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Add user notification</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Configure a note that will be sent to the end user when the status of this partition is changed. The notification will be sent to the email specified in the end entity. See Approval Notification about what parameters are possible to use.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
></p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Accumulative_Approval_Profiles.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Accumulative Approval Profiles</span>
        </a>
                <a href="Services.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Services</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

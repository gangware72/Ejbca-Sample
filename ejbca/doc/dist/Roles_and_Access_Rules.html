<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Roles and Access Rules - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=81888039"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                                                     <li><a href="EJBCA_CA_Concept_Guide.html">EJBCA CA Concept Guide</a></li>
                                                            </ul>
</div>            <h1 id="src-81888039"> <span>Roles and Access Rules</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>    <span style="color: #000000;">
This is an overview page on roles and access rules. For more information on working with roles and access rules, see <a   href="Roles_and_Access_Rules_Operations.html">Roles and Access Rules Operations</a>.    </span>
</p>
<p   
>    <span style="color: #000000;">
    </span>
</p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-81888039_safe-id-aWQtLlJvbGVzYW5kQWNjZXNzUnVsZXN2Ny4zLjAtV2hvaXNhbkFkbWluaXN0cmF0b3I_">Who is an Administrator?</a></p>
</li><li class=" "><p   
><a   href="#src-81888039_id-.RolesandAccessRulesv7.3.0-Roles">Roles</a></p>
</li><li class=" "><p   
><a   href="#src-81888039_id-.RolesandAccessRulesv7.3.0-Namespaces">Namespaces</a></p>
</li><li class=" "><p   
><a   href="#src-81888039_id-.RolesandAccessRulesv7.3.0-AccessRules">Access Rules</a></p>
</li></ul>    <div class="section section-1" id="src-81888039_safe-id-aWQtLlJvbGVzYW5kQWNjZXNzUnVsZXN2Ny4zLjAtV2hvaXNhbkFkbWluaXN0cmF0b3I_">
        <h1 class="heading "><span>Who is an Administrator?</span></h1>
<p   
>The term <i class=" ">administrator</i> in EJBCA designates any user with authenticated access to the CA or RA UIs. In this manual that encompasses the obvious cases such as CA Administrators and RA Administrators, but also includes other roles such as Auditors. An Administrator is identified by information of the client SSL certificate which they use to authenticate themselves with. This authentication is processed as follows:</p>
<ol class=" "><li class=" "><p   
>During the TLS handshake with the application server, the issuer of the client certificate is verified with a list of trusted CA certificates known as the 'truststore'.</p>
</li><li class=" "><p   
>EJBCA verifies that the client certificate exists in the database, and may check that it's not revoked.</p>
</li><li class=" "><p   
>EJBCA tries to match the information in the certificate with any of the matching criteria found in the different roles. If matches are found in several roles, then the user will receive the collated rights. Any specific denials will trump approvals.</p>
</li><li class=" "><p   
>If a match is found, the access rules for this group is given to the administrator.</p>
</li></ol><p   
>Administrator privileges is configured through <i class=" ">Roles and Access Rules</i>-page in the CA UI or by using the CLI. If you have locked yourself out of the GUI, the CLI can add another admin certificate to allow continued operations.</p>
<p   
>The following properties in <i class=" ">web.properties </i>affect how administrators are authenticated:</p>
    <div  class="tablewrap">
        <table class="relative-table wrapped confluenceTable">
                    <colgroup>
                                    <col  width="10%"/>
                                    <col  width="79%"/>
                                    <col  width="9%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Property Name</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Default Value</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p  class="p1" 
>web.reqcertindb</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p  class="p1" 
>Require administrator certificates to be available in database for revocation checks. Set this to false, if you want to be able to use admin certificates issued by external CAs.</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>true</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-1" id="src-81888039_id-.RolesandAccessRulesv7.3.0-Roles">
        <h1 class="heading "><span>Roles</span></h1>
<p   
>    <span style="color: #000000;">
Administrators are given access rights based on what role(s) they belong to, and are identified by being <i class=" ">members</i> of that role.    </span>
</p>
<p   
>    <span style="color: #000000;">
<img  class="confluence-embedded-image"  src="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.02.46.png" alt="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.02.46.png" width="800"  />
    </span>
</p>
<p   
>    <span style="color: #000000;">
Members are identified using a match value, of which there are three categories:    </span>
</p>
    <div  class="tablewrap">
        <table class="relative-table wrapped confluenceTable">
                    <colgroup>
                                    <col  width="12%"/>
                                    <col  width="87%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Match Value Type</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Possible Values</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>X509</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>    <span style="color: #000000;">
The full subject DN, any specific DN field or the specific serial number of their client certificate. For example, a specific administrator may belong to one role based on their common name (CN), and another based on their country (C).    </span>
</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CLI</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>The username/password of their end entity, but only available through the CLI.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>PublicAccessAuthenticationToken</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>None, is used to give unauthenticated users access to the RA UI.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.04.01.png" alt="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.04.01.png" width="359" height="250" />
    </p>
<p   
>Roles are also used for limiting access for other instances of EJBCA connecting over <a   href="Peer_Systems.html">Peers</a>, which allows separate RA instances to interface against the same CA agnostic of each other.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Note that any role meant for proxying RA operations over peers will be limited to a restricted set of access rules pertaining to RA operations, mitigating the consequences of an RA instance becoming compromised.</p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-81888039_id-.RolesandAccessRulesv7.3.0-Namespaces">
        <h1 class="heading "><span>Namespaces</span></h1>
<p   
>A concept in roles management is <strong class=" ">Namespaces</strong>, the purpose of which is to create a partition between sets of roles, in order to mitigate the risk of mistakenly assigning an administrator belonging to one organization to a role belonging to another.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/81888039/Screenshot_2019-02-27_at_13.51.18.png" alt="images/download/attachments/81888039/Screenshot_2019-02-27_at_13.51.18.png" width="371" height="150" />
    </p>
<p   
>Roles with editing rights to other roles will only ever see or edit other roles belonging to the same namespace, so it also allows for delegation of role administration, which is a typical use case of <strong class=" ">Managed PKI</strong> solutions.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For more information about working with namespaces, see <a   href="Managing_Role_Namespaces.html">Namespace Operations</a>.</p>
        </div>
    </div>
    </div>
    <div class="section section-1" id="src-81888039_id-.RolesandAccessRulesv7.3.0-AccessRules">
        <h1 class="heading "><span>Access Rules</span></h1>
<p   
>    <span style="color: #000000;">
Access rules are used to authorize specific actions in EJBCA, ranging from activating crypto token keys to creating end entities to managing the access rules themselves. Access rules can be managed in two ways: either by setting them using one of EJBCA's <a   href="Predefined_Role_Templates.html">Role Templates</a> or by editing them manually from the <a   href="Access_Rules.html">comprehensive list</a> in the advanced view. Often a combination of the two is used - a predefined template to start off and then fine tuning by giving or denying access to individual rules.    </span>
</p>
<p   
>    <span style="color: #000000;">
EJBCA Access Rules inherit the state from their parent rule by default, unless individually specified. Each access rule consists of the states     </span>
<strong class=" ">Allow, Deny</strong>    <span style="color: #000000;">
 and     </span>
<strong class=" ">Inherit</strong>    <span style="color: #000000;">
.    </span>
</p>
<p   
>    <span style="color: #000000;">
<img  class="confluence-embedded-image"  src="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.29.55.png" alt="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.29.55.png" width="800"  />
    </span>
</p>
<p   
>    <span style="color: #000000;">
Upon saving in this view the access rules are normalized, meaning that any specific rules that are redundant are simply set back to <strong class=" ">Inherit. </strong>The advanced mode also provides a summary view in order to verify what rules which have been set.    </span>
</p>
<p   
>    <span style="color: #000000;">
<img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.30.40.png" alt="images/download/attachments/81888039/Screenshot_2019-02-27_at_15.30.40.png" width="400"  />
<br/>    </span>
</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="AuthenticationKeyBinding.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>AuthenticationKeyBinding</span>
        </a>
                <a href="Access_Rules.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Access Rules</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

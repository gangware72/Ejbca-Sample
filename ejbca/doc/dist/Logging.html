<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Logging - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=85931864"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                                         <li class="shortcut"><a href="EJBCA_Operations.html">EJBCA Operations</a></li>
                                                                                     <li><a href="EJBCA_CA_Concept_Guide.html">EJBCA CA Concept Guide</a></li>
                                                            </ul>
</div>            <h1 id="src-85931864"> <span>Logging</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85931864_id-.Loggingv7.4.0-LogDevicesimplementedinEJBCA">Log Devices implemented in EJBCA</a></p>
</li><li class=" "><p   
><a   href="#src-85931864_id-.Loggingv7.4.0-SecurityAuditLogSecurity_Audit_Log">Security Audit Log</a></p>
</li><li class=" "><p   
><a   href="#src-85931864_id-.Loggingv7.4.0-SystemLogSystem_Log">System Log</a></p>
</li><li class=" "><p   
><a   href="#src-85931864_id-.Loggingv7.4.0-LogMonitoring">Log Monitoring</a></p>
</li><li class=" "><p   
><a   href="#src-85931864_id-.Loggingv7.4.0-IntegratingwithaSIEM">Integrating with a SIEM</a></p>
</li><li class=" "><p   
><a   href="#src-85931864_safe-id-aWQtLkxvZ2dpbmd2Ny40LjAtUmVsYXRlZENvbnRlbnQ6QXVkaXRMb2dPdmVydmlldw">Related Content: Audit Log Overview</a></p>
</li></ul><p   
><span id="src-85931864_id-.Loggingv7.4.0-Security_Audit_log_vs_System_log"></span></p>
<p   
>A PKI system has the following types of logs:</p>
<ul class=" "><li class=" "><p   
>Security Audit Log: Used for PKI auditors to audit important security PKI events that the system performs.</p>
</li><li class=" "><p   
>System Log: Used to monitor daily operations in the system, debug and track down errors etc.</p>
</li><li class=" "><p   
>Transaction Log: Used for accounting of specific functions, mainly validation (OCSP).</p>
</li></ul><p   
>The Security Audit Log specifies in detail what it logs and does not log any other events. The Security Audit log logs important events such as &quot;Certificate issued&quot;, &quot;Certificate Profile edited&quot;, &quot;Administrator accessed resource&quot;. One of the most important aspects to consider is that the Security Audit log does <strong class=" "><i class=" ">not</i></strong> log things that do not happen. Things that do not happen are for example invalid requests that the system rejects, because the PKI system did not perform any important auditable event.</p>
<p   
>The System Log logs all events that are interesting to monitor, such as rejecting invalid requests, reading profiles etc.</p>
<p   
>The main purpose of the Security Audit Log is to provide information to an auditor, and the auditor wants to know what the system has done, what certificates were issued etc, but is not so interested in what the system did not do.</p>
<p   
>The Security Audit Log is stored in the database and the System Log is stored in log files. By default the System Log also contains the Security Audit Log, but this can be configured.</p>
<p   
>For more information on the OCSP Transaction Log, see <a   href="OCSP.html#src-85934019_id-.OCSPv7.4.0-auditandaccountlogging">Audit and Account Logging</a> and for information on the WS Transaction Log, see <a   href="Web_Service_Interface.html">Web Service Interface</a>.</p>
    <div class="section section-1" id="src-85931864_id-.Loggingv7.4.0-LogDevicesimplementedinEJBCA">
        <h1 class="heading "><span>Log Devices implemented in EJBCA</span></h1>
    <div class="section section-2" id="src-85931864_safe-id-aWQtLkxvZ2dpbmd2Ny40LjAtSW50ZWdyaXR5UHJvdGVjdGVkRGV2aWNlSW50ZWdyaXR5UHJvdGVjdGVkRGV2aWNlXyhFSkJDQV9FbnRlcnByaQ">
        <h2 class="heading "><span id="src-85931864_safe-id-aWQtLkxvZ2dpbmd2Ny40LjAtSW50ZWdyaXR5UHJvdGVjdGVkRGV2aWNlXyhFSkJDQV9FbnRlcnByaQ" class="confluence-anchor-link"></span><span>IntegrityProtectedDevice </span></h2>
<p   
></p>
<p   
><span class="status blue " >ENTERPRISE</span>
 This is an EJBCA Enterprise feature.</p>
<p   
>See main page: <a   href="Integrity_Protected_Security_Audit_Log.html">Integrity Protected Log Device</a>.</p>
<p   
>The integrity protected log device stores audit record in the AuditRecordData table in the database. For more information on Database Integrity Protection, see <a   href="EJBCA_Security.html">EJBCA Security</a>.</p>
    </div>
    <div class="section section-2" id="src-85931864_id-.Loggingv7.4.0-Log4JLogDeviceLog4JLogDevice">
        <h2 class="heading "><span id="src-85931864_id-.Loggingv7.4.0-Log4JLogDevice" class="confluence-anchor-link"></span><span>Log4JLogDevice </span></h2>
<p   
>Appends the information from the official event to the console or file. This is the same target where all the other info/debug output is sent to. There is no protection from alteration and events sent to this device cannot be fetched back to EJBCA for display in the Admin GUI.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85931864_id-.Loggingv7.4.0-SecurityAuditLogSecurity_Audit_Log">
        <h1 class="heading "><span id="src-85931864_id-.Loggingv7.4.0-Security_Audit_Log" class="confluence-anchor-link"></span><span>Security Audit Log </span></h1>
<p   
>See main page: <a   href="Audit_Log_Overview.html">Audit Log Overview</a></p>
<p   
>Besides the system log (see below), EJBCA provides a powerful audit log to specifically log all steps of the enrollment process into the database, for use of an auditor at a later time.</p>
    </div>
    <div class="section section-1" id="src-85931864_id-.Loggingv7.4.0-SystemLogSystem_Log">
        <h1 class="heading "><span id="src-85931864_id-.Loggingv7.4.0-System_Log" class="confluence-anchor-link"></span><span>System Log </span></h1>
<p   
>The system log is logged using Log4J and has several configurable log levels:</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Log Level</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>FATAL</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Catastrophic events logged by the JVM or application server. The system is most likely in a very bad and/or unusable state.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>ERROR</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Errors that should cause the IT staff to look into the system. It could be fatal so the system stopped working.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>WARNING</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Warnings about misconfiguration. The system is still working, but functionality could be degraded.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>INFO</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Informational messages that are interesting for monitoring purposes and statistic purposes. This is normally the default level.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>DEBUG</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Debug information useful to see details of what is happening in the system.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>TRACE</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Trace information that can be useful to track down bugs or small misconfigurations. Very rich output showing detailed trace of what happens in the system code.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
></p>
<p   
>System log configuration is dependent on the application server used, see <a   href="Application_Servers.html">Application Servers</a>. It is recommended to configure logging in the application server, i.e. JBoss.</p>
<p   
>In JBoss EAP7/WildFly10 or later, you can configure the logging section of <tt class=" ">standalone.xml.</tt></p>
<p   
>The following displays an example of a configuration specifying a more advanced logger, logging of EJBCA events to a separate ejbca.log log file that rotates by size every 32MB, and keeping maximum 31 rotated log files:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">subsystem</code><code class="plain"> </code><code class="color1">xmlns</code><code class="plain">=</code><code class="string">"urn:jboss:domain:logging:3.0"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">console</code><code class="plain">-handler </code><code class="color1">name</code><code class="plain">=</code><code class="string">"CONSOLE"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"INFO"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">named</code><code class="plain">-formatter </code><code class="color1">name</code><code class="plain">=</code><code class="string">"COLOR-PATTERN"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;/</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">console</code><code class="plain">-handler&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">periodic</code><code class="plain">-rotating-file-handler </code><code class="color1">name</code><code class="plain">=</code><code class="string">"FILE"</code><code class="plain"> </code><code class="color1">autoflush</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">named</code><code class="plain">-formatter </code><code class="color1">name</code><code class="plain">=</code><code class="string">"PATTERN"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;/</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">file</code><code class="plain"> </code><code class="color1">relative-to</code><code class="plain">=</code><code class="string">"jboss.server.log.dir"</code><code class="plain"> </code><code class="color1">path</code><code class="plain">=</code><code class="string">"server.log"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">suffix</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">".yyyy-MM-dd"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">append</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">periodic</code><code class="plain">-rotating-file-handler&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">size</code><code class="plain">-rotating-file-handler </code><code class="color1">name</code><code class="plain">=</code><code class="string">"EJBCAFILE"</code><code class="plain"> </code><code class="color1">autoflush</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">pattern</code><code class="plain">-formatter </code><code class="color1">pattern</code><code class="plain">=</code><code class="string">"%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;/</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">file</code><code class="plain"> </code><code class="color1">relative-to</code><code class="plain">=</code><code class="string">"jboss.server.log.dir"</code><code class="plain"> </code><code class="color1">path</code><code class="plain">=</code><code class="string">"ejbca.log"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">rotate</code><code class="plain">-size </code><code class="color1">value</code><code class="plain">=</code><code class="string">"32M"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">max</code><code class="plain">-backup-index </code><code class="color1">value</code><code class="plain">=</code><code class="string">"31"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">append</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">size</code><code class="plain">-rotating-file-handler&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">logger</code><code class="plain"> </code><code class="color1">category</code><code class="plain">=</code><code class="string">"com.arjuna"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"WARN"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">logger</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">logger</code><code class="plain"> </code><code class="color1">category</code><code class="plain">=</code><code class="string">"org.jboss.as.config"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"DEBUG"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">logger</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">logger</code><code class="plain"> </code><code class="color1">category</code><code class="plain">=</code><code class="string">"sun.rmi"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"WARN"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">logger</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">logger</code><code class="plain"> </code><code class="color1">category</code><code class="plain">=</code><code class="string">"org.ejbca"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"DEBUG"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">handlers</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">handler</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"EJBCAFILE"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;/</code><code class="keyword">handlers</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">logger</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">logger</code><code class="plain"> </code><code class="color1">category</code><code class="plain">=</code><code class="string">"org.cesecore"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"DEBUG"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">handlers</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">handler</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"EJBCAFILE"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;/</code><code class="keyword">handlers</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">logger</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">root</code><code class="plain">-logger&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">level</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"INFO"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">handlers</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">handler</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"CONSOLE"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">            &lt;</code><code class="keyword">handler</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"FILE"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">        &lt;/</code><code class="keyword">handlers</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">root</code><code class="plain">-logger&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">formatter</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"PATTERN"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">pattern</code><code class="plain">-formatter </code><code class="color1">pattern</code><code class="plain">=</code><code class="string">"%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">formatter</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"COLOR-PATTERN"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;</code><code class="keyword">pattern</code><code class="plain">-formatter </code><code class="color1">pattern</code><code class="plain">=</code><code class="string">"%K{level}%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/</code><code class="keyword">formatter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">subsystem</code><code class="plain">&gt;</code></div>
</div>
    </div>
    <div class="section section-2" id="src-85931864_id-.Loggingv7.4.0-DebugLogging">
        <h2 class="heading "><span>Debug Logging</span></h2>
<p   
>In JBoss you can easily enable and disable DEBUG logging and switch back to INFO logging at runtime. To configure the DEBUG log level the first time, run the following JBoss/WildFly CLI commands.</p>
<p   
>At first you need to create the log modules in JBoss/WildFly. Log modules are <i class=" ">java packages</i> and EJBCA uses two major java packages. This only need to be done once, when you have run these two commands, you can then set log level back and forth on these log modules.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.ejbca:add</code></div>
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore:add</code></div>
</div>
    </div>
<p   
>When the modules are there (technically it creates entries in JBoss/WildFly standalone.xml), you can set log level to DEBUG to these two modules.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.ejbca:write-attribute(name=level, value=DEBUG)</code></div>
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore:write-attribute(name=level, value=DEBUG)</code></div>
</div>
    </div>
<p   
>You can later switch between DEBUG and INFO logging at runtime, for example to specify INFO logging (normal production level):</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.ejbca:write-attribute(name=level, value=INFO)</code></div>
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore:write-attribute(name=level, value=INFO) </code></div>
</div>
    </div>
    <div class="section section-3" id="src-85931864_id-.Loggingv7.4.0-Loglevelonspecificsubmodules">
        <h3 class="heading "><span>Log level on specific sub modules</span></h3>
<p   
>If you do not want to enable debug logging for all of EJBCA, you can also do so for specific sub modules of EJBCA. For example, to enable debug logging for Certificate Transparency run the following command to add the sub modules to JBoss/WildFly:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore.certificates.certificatetransparency:add</code></div>
</div>
    </div>
<p   
>You can then enable debug logging for CT only with:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore.certificates.certificatetransparency:write-attribute(name=level, value=DEBUG)</code></div>
</div>
    </div>
<p   
>Note that after adding that sub module, this exists in addition to the general packages you may have created above, and can be controlled individually. You can therefore remove the sub module form the log system again completely with:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">/subsystem=logging/logger=org.cesecore.certificates.certificatetransparency:remove</code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-2" id="src-85931864_id-.Loggingv7.4.0-LoggingtoSyslog">
        <h2 class="heading "><span>Logging to Syslog</span></h2>
<p   
>You can configure JBoss/WildFly to log to syslog and there are different configurations you can use.</p>
<p   
>The following shows an example for JBoss EAP7/WildFly 10+ to log to a remote syslog server, using syslog on TCP port 514. You can tweak the settings to suit different syslog servers.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;custom-handler name=</code><code class="string">"SYSLOGTCP"</code><code class="plain"> </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"org.jboss.logmanager.handlers.SyslogHandler"</code><code class="plain"> module=</code><code class="string">"org.jboss.logmanager"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;level name=</code><code class="string">"INFO"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;encoding value=</code><code class="string">"ISO-8859-1"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;formatter&gt;</code></div>
<div class="line"><code class="plain">        &lt;pattern-formatter pattern=</code><code class="string">"%-5p [%c] (%t) %s%E%n"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/formatter&gt;</code></div>
<div class="line"><code class="plain">    &lt;properties&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"appName"</code><code class="plain"> value=</code><code class="string">"EJBCA"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"facility"</code><code class="plain"> value=</code><code class="string">"LOCAL_USE_5"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"serverHostname"</code><code class="plain"> value=</code><code class="string">"syslogserver-at.mydomain.com"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"hostname"</code><code class="plain"> value=</code><code class="string">"-"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"port"</code><code class="plain"> value=</code><code class="string">"514"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"syslogType"</code><code class="plain"> value=</code><code class="string">"RFC5424"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"protocol"</code><code class="plain"> value=</code><code class="string">"TCP"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"messageDelimiter"</code><code class="plain"> value=</code><code class="string">"-"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">      &lt;property name=</code><code class="string">"useMessageDelimiter"</code><code class="plain"> value=</code><code class="string">"true"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/properties&gt;</code></div>
<div class="line"><code class="plain">&lt;/custom-handler&gt;</code></div>
</div>
    </div>
    </div>
    <div class="section section-2" id="src-85931864_id-.Loggingv7.4.0-SystemLogSigningLog_Signing">
        <h2 class="heading "><span id="src-85931864_id-.Loggingv7.4.0-Log_Signing" class="confluence-anchor-link"></span><span>System Log Signing </span></h2>
<p   
>System logs can be signed as they are being rotated. For more information, see <strong class=" ">External Log Signing</strong> in <a   href="EJBCA_Security.html">EJBCA Security</a>.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85931864_id-.Loggingv7.4.0-LogMonitoring">
        <h1 class="heading "><span>Log Monitoring</span></h1>
<p   
>When monitoring logs from EJBCA, the common trigger to monitor is ERROR events in the System Log.</p>
<p   
>For example, if there is an error to initialize an HSM during startup:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">10:46:53,099 ERROR [org.cesecore.keys.token.p11.Pkcs11Wrapper] (default task-9) Wrong arguments were passed to sun.security.pkcs11.wrapper.PKCS11.CK_C_INITIALIZE_ARGS.getInstance threw an exception</code></div>
</div>
    </div>
<p   
>An error event like this should trigger an operator to inspect the system to investigate the issue.</p>
    </div>
    <div class="section section-1" id="src-85931864_id-.Loggingv7.4.0-IntegratingwithaSIEM">
        <h1 class="heading "><span>Integrating with a SIEM</span></h1>
<p   
>You can integrate EJBCA with a Security Information and Event Management (SIEM) software by sending logs to it.</p>
    <div class="section section-2" id="src-85931864_id-.Loggingv7.4.0-Graylog">
        <h2 class="heading "><span>Graylog</span></h2>
<p   
><a  class="external-link" href="https://www.graylog.org/">Graylog</a> can consume syslog, and other log formats. For more information, see <a   href="Integrating_EJBCA_with_Graylog.html">Integrating EJBCA with Graylog</a></p>
    </div>
    </div>
    <div class="section section-1" id="src-85931864_safe-id-aWQtLkxvZ2dpbmd2Ny40LjAtUmVsYXRlZENvbnRlbnQ6QXVkaXRMb2dPdmVydmlldw">
        <h1 class="heading "><span>Related Content: Audit Log Overview</span></h1>
<p   
>For more information on the EJBCA Audit Log, specifically logging all steps of the enrollment process into the database, for use of an auditor at a later time, see <a   href="Audit_Log_Overview.html">Audit Log Overview.</a></p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Web_Service_Interface.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Web Service Interface</span>
        </a>
                <a href="Audit_Log_Overview.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Audit Log Overview</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Enrollment Questions - EJBCA - Documentation Space</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="108530570">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">EJBCADS</span>
                    <img class="space-logo" src="EJBCADS.png" />
                </h1>
                <a href="EJBCA_7.4.3.2_Documentation.html" class="ht-space-link">
                    <h2>EJBCA - Documentation Space</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=85924513"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="EJBCA_7.4.3.2_Documentation.html">EJBCA - Documentation Space</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="EJBCA_Documentation.html">EJBCA Documentation</a></li>
                                                                                     <li><a href="Troubleshooting_Guide.html">Troubleshooting Guide</a></li>
                                                            </ul>
</div>            <h1 id="src-85924513"> <span>Enrollment Questions</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   style="text-align:left;"
>The following provides information for troubleshooting enrollment issues. To view general troubleshooting tips and search for troubleshooting topics, see <a   href="Troubleshooting_Guide.html">EJBCA Troubleshooting</a>.</p>
<p   style="text-align:left;"
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-85924513_id-.EnrollmentQuestionsv7.4.0-ErrorissuingcertificatesregardingusershavingthesameSubjectDN">Error issuing certificates regarding users having the same Subject DN</a></p>
</li><li class=" "><p   
><a   href="#src-85924513_id-.EnrollmentQuestionsv7.4.0-ExceptionwithanSQLerrorwhenaddinganewuser">Exception with an SQL error when adding a new user</a></p>
</li><li class=" "><p   
><a   href="#src-85924513_id-.EnrollmentQuestionsv7.4.0-Errorwhenissuingnewcertificate">Error when issuing new certificate</a></p>
</li><li class=" "><p   
><a   href="#src-85924513_safe-id-aWQtLkVucm9sbG1lbnRRdWVzdGlvbnN2Ny40LjAtSWhhdmVlbnJvbGxlZG1hbnVhbGx5Zm9yYXNlcnZlci13aHlhcmVteVBLQ1MxMEROZmllbGRzSWdub3JlZD8">I have enrolled manually for a server - why are my PKCS10 DN fields Ignored?</a></p>
</li><li class=" "><p   
><a   href="#src-85924513_safe-id-aWQtLkVucm9sbG1lbnRRdWVzdGlvbnN2Ny40LjAtRG9lc0VKQkNBc3RpbGxzdXBwb3J0QnJvd3NlckVucm9sbG1lbnQ_">Does EJBCA still support Browser Enrollment?</a></p>
</li></ul>    <div class="section section-1" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-ErrorissuingcertificatesregardingusershavingthesameSubjectDN">
        <h1 class="heading faq"><span>Error issuing certificates regarding users having the same Subject DN</span></h1>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Cause">
        <h2 class="heading faq"><span>Cause</span></h2>
<p  class="faq" style="text-align:left;"
>If you receive the error that a user cannot have the same Subject DN as another user, when you are issuing certificates, this is caused by the <strong class=" ">Enforce unique DN</strong> check.</p>
<p   style="text-align:left;"
>By default, different end entities cannot have the same subject DN issued from one CA. The check enforces Subject DN uniqueness and is performed when new certificates are issued.</p>
<p   style="text-align:left;"
>This may be inconvenient in some cases as one user can appear as multiple end entities.</p>
    </div>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Solution">
        <h2 class="heading "><span>Solution</span></h2>
<p   style="text-align:left;"
>To disable the enforcement of subject DN uniqueness, do the following:</p>
<ol class=" "><li class=" "><p   
>In the CA GUI, click <strong class=" ">Certification Authorities</strong> under <strong class=" ">CA Functions</strong>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Edit CA</strong> and in the CA configuration, and clear the option <strong class=" ">Enforce unique DN</strong>.</p>
</li></ol><p   style="text-align:left;"
>For more information on the <strong class=" ">Enforce unique DN</strong> option, see <a   href="CA_Fields.html">CA Fields.</a></p>
    </div>
    </div>
    <div class="section section-1" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-ExceptionwithanSQLerrorwhenaddinganewuser">
        <h1 class="heading faq"><span>Exception with an SQL error when adding a new user</span></h1>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Problem">
        <h2 class="heading faq"><span>Problem</span></h2>
<p  class="faq" style="text-align:left;"
>When adding a new user, an exception with an SQL error like the following is thrown: &quot;<i class=" ">Value too large for column USERDATA.SUBJECTALTNAME</i>&quot; or &quot;<i class=" ">Value too large for column USERDATA.SUBJECTDN</i>&quot;.</p>
    </div>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Cause.1">
        <h2 class="heading faq"><span>Cause</span></h2>
<p   style="text-align:left;"
>This can happen if you have specified one or more fields of the <strong class=" ">Subject Alternative Name</strong> with a total length exceeding 2000 characters (400 characters for subject DN).</p>
    </div>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Solution.1">
        <h2 class="heading "><span>Solution</span></h2>
<p   style="text-align:left;"
>Extend the size of the column SUBJECTALTNAME and SUBJECTDN of the table USERDATA and SUBJECTDN of CERTIFICATEDATA.</p>
<p   style="text-align:left;"
>The following displays an example for extending the subjectDN and altName columns in MySQL (version &gt; 5.0.3):</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">mysql&gt; alter table CertificateData modify subjectDN varchar(</code><code class="value">2048</code><code class="plain">); </code></div>
<div class="line"><code class="plain">mysql&gt; alter table UserData modify subjectDN varchar(</code><code class="value">2048</code><code class="plain">); </code></div>
<div class="line"><code class="plain">mysql&gt; alter table UserData modify subjectAltName varchar(</code><code class="value">2048</code><code class="plain">);</code></div>
</div>
    </div>
<p   style="text-align:left;"
>The new column sizes can cause issues when applying indexes in some database versions, giving errors like for example: <i class=" ">&quot;Specified key was too long; max key length is 767 bytes&quot;</i></p>
<p   style="text-align:left;"
>To circumvent this issue, create the index over a subset of the column by running the following:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">mysql&gt; create index certificatedata_idx4 ON CertificateData (subjectDN(</code><code class="value">250</code><code class="plain">)); </code></div>
</div>
    </div>
<p   
>For more information on Subject Alternative Names and Subject DN Fields, see <a   href="End_Entity_Profiles_Fields.html">End Entity Profiles Fields</a>.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Errorwhenissuingnewcertificate">
        <h1 class="heading "><span>Error when issuing new certificate</span></h1>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Problem.1">
        <h2 class="heading "><span>Problem</span></h2>
<p  class="faq" style="text-align:left;"
>When issuing a new certificate, I get the exception/error: <i class=" ">Got request with status GENERATED (40), NEW, FAILED or INPROCESS required: foo; nested exception is: javax.ejb.EJBException:null</i></p>
    </div>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Cause.2">
        <h2 class="heading faq"><span>Cause</span></h2>
<p   style="text-align:left;"
>When using the AuthenticationSession (default) all users have a STATUS. The status lifecycle begins with NEW and ends with REVOKED. Only when the status is NEW, FAILED or INPROCESS is it possible to issue a certificate to a user. After a certificate has been issued, the status is set to GENERATED. This works like a one-time-password scheme.</p>
    </div>
    <div class="section section-2" id="src-85924513_id-.EnrollmentQuestionsv7.4.0-Solution.2">
        <h2 class="heading "><span>Solution</span></h2>
<p   style="text-align:left;"
>To issue a new certificate to the user, his/her status must be reset to NEW, FAILED, or INPROCESS.</p>
<p   style="text-align:left;"
>To reset the status, run the following:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">bin/ejbca.sh ra setendentitystatus username status Status </code><code class="string">'10'</code><code class="plain"> is NEW</code></div>
</div>
    </div>
<p   style="text-align:left;"
>To view a list of all status codes, run:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">bin/ejbca.sh ra setendentitystatus</code></div>
</div>
    </div>
<p   style="text-align:left;"
>For more information, see <a   href="Create_User_Certificates.html">Create User Certificates</a> and <a   href="Roles_and_Access_Rules_Operations.html">Roles and Access Rules Operations</a>.</p>
    </div>
    </div>
    <div class="section section-1" id="src-85924513_safe-id-aWQtLkVucm9sbG1lbnRRdWVzdGlvbnN2Ny40LjAtSWhhdmVlbnJvbGxlZG1hbnVhbGx5Zm9yYXNlcnZlci13aHlhcmVteVBLQ1MxMEROZmllbGRzSWdub3JlZD8">
        <h1 class="heading faq"><span>I have enrolled manually for a server - why are my PKCS10 DN fields Ignored?</span></h1>
<p   style="text-align:left;"
>PKCS#10 is a standard format for sending the public key (self signed to provide proof-of-possession) to a CA. EJBCA does not trust the DN parts the user enters when he creates the PKCS10 request. The only way to match the certificate with what you enter in the pkcs10 is to enter the same thing in the end entity in EJBCA. If you really trust your RAs that send certificate requests, there is an option to allow DN override in the Certificate Profile, see <a   href="Certificate_Profile_Fields.html">Certificate Profile Fields</a>.</p>
    </div>
    <div class="section section-1" id="src-85924513_safe-id-aWQtLkVucm9sbG1lbnRRdWVzdGlvbnN2Ny40LjAtRG9lc0VKQkNBc3RpbGxzdXBwb3J0QnJvd3NlckVucm9sbG1lbnQ_">
        <h1 class="heading "><span>Does EJBCA still support Browser Enrollment?</span></h1>
<p   
>For the time being, yes. Browser enrollment still exists in the EJBCA Public Web, but will not be updated and will disappear completely when the Public Web is retired in EJBCA and replaced by the EJBCA RA UI. The reason is that all major browser distributions have dropped support for Browser Enrollment.</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="Installation_and_Deployment.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Installation and Deployment</span>
        </a>
                <a href="Performance_Timeouts.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Performance/Timeouts</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
